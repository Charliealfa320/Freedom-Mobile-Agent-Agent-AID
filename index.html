<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freedom Mobile Agent AID</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacOSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #0d1117;
            color: #c9d1d9;
        }
        h1 { 
            text-align: center; 
            color: #58a6ff; 
            margin-bottom: 40px; 
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        .logo-container {
            position: absolute;
            top: 20px;
            left: 20px;
        }
        .logo {
            width: 80px;
            height: auto;
        }
        section {
            background: #161b22;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            border: 1px solid #30363d;
        }
        h2 { margin-top: 0; color: #58a6ff; }
        .input-group { margin: 16px 0; }
        label { display: block; margin-bottom: 6px; font-weight: 500; color: #8b949e; }
        input, select {
            width: 100%;
            max-width: 320px;
            padding: 10px 12px;
            border: 1px solid #30363d;
            border-radius: 6px;
            font-size: 16px;
            background: #0d1117;
            color: #c9d1d9;
        }
        button {
            padding: 10px 24px;
            background-color: #238636;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover { background-color: #2ea043; }
        .result {
            margin-top: 20px;
            padding: 16px;
            background-color: #21262d;
            border-radius: 8px;
            white-space: pre-line;
            min-height: 40px;
            border: 1px solid #30363d;
        }
        .error { color: #f85149; font-weight: 500; }
        .note { font-size: 0.9em; color: #8b949e; margin-top: 12px; }
    </style>
</head>
<body>

    <div class="logo-container">
        <img src="https://i.imgur.com/EXAMPLELOGO.png" alt="Freedom Mobile Logo" class="logo"> <!-- Replace with your actual logo URL if hosted -->
    </div>

    <h1>Freedom Mobile Agent AID</h1>

    <!-- Tool 1 -->
    <section>
        <h2>1. Egyptian Time Adder</h2>
        <p>Add minutes to Egyptian time (12-hour).</p>
        <div class="input-group">
            <label for="egyptTime12">Current Time (12-hour):</label>
            <input type="text" id="egyptTime12" placeholder="e.g. 3:25 PM">
        </div>
        <div class="input-group">
            <label for="addMinutes">Minutes to Add:</label>
            <input type="number" id="addMinutes" placeholder="e.g. 90" min="0">
        </div>
        <button onclick="addMinutesToEgyptTime()">Calculate</button>
        <div id="output1" class="result"></div>
    </section>

    <!-- Tool 2 - FIXED -->
    <section>
        <h2>2. Egypt ↔ Toronto Converter</h2>
        <p>Convert 12-hour time (works both ways now, 7-hour difference in winter).</p>
        <div class="input-group">
            <label for="inputTime12">Time (12-hour):</label>
            <input type="text" id="inputTime12" placeholder="e.g. 1:00 PM">
        </div>
        <div class="input-group">
            <label for="direction">From:</label>
            <select id="direction">
                <option value="egyptToToronto">Egypt → Toronto</option>
                <option value="torontoToEgypt">Toronto → Egypt</option>
            </select>
        </div>
        <button onclick="convertTimeTwoWay()">Convert</button>
        <div id="output2" class="result"></div>
        <div class="note">January = 7 hours difference (no DST in Toronto)</div>
    </section>

    <!-- Tool 3 & 4 remain the same, just copy from previous if needed -->

    <script>
        // ... (keep Tool 1, 3, 4 scripts from before)

        // FIXED Tool 2
        function convertTimeTwoWay() {
            const timeStr = document.getElementById('inputTime12').value.trim();
            const direction = document.getElementById('direction').value;
            const output = document.getElementById('output2');

            const parsed = parse12HourTime(timeStr);
            if (!parsed) {
                output.innerHTML = '<span class="error">Use format like 1:00 PM or 8:30 AM</span>';
                return;
            }

            const now = new Date();
            let baseDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), parsed.hour, parsed.minute);

            // Get accurate offset for from/to zones on this date
            const fromZone = direction === 'egyptToToronto' ? 'Africa/Cairo' : 'America/Toronto';
            const toZone = direction === 'egyptToToronto' ? 'America/Toronto' : 'Africa/Cairo';
            const label = direction === 'egyptToToronto' ? 'Toronto' : 'Egypt';

            // Use Intl to get the correct local time string directly
            const formatter = new Intl.DateTimeFormat('en-US', {
                timeZone: toZone,
                hour: 'numeric',
                minute: 'numeric',
                hour12: true
            });

            const parts = formatter.formatToParts(baseDate);
            const hourPart = parts.find(p => p.type === 'hour').value;
            const minutePart = parts.find(p => p.type === 'minute').value;
            const dayPeriod = parts.find(p => p.type === 'dayPeriod').value;

            const converted = `${hourPart}:${minutePart} ${dayPeriod}`;

            output.textContent = `${label} time: ${converted}`;
        }

        function parse12HourTime(str) {
            const match = str.match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/i);
            if (!match) return null;
            let hour = parseInt(match[1]);
            const min = parseInt(match[2]);
            const period = match[3].toUpperCase();
            if (hour === 12) hour = 0;
            if (period === 'PM') hour += 12;
            if (hour > 23 || min > 59) return null;
            return { hour, minute: min };
        }

        // Add your other functions here...
    </script>
</body>
</html>
