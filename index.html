<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freedom Mobile Agent AID</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacOSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 920px;
            margin: 0 auto;
            padding: 20px 15px;
            background: #0d1117;
            color: #c9d1d9;
        }
        h1 {
            text-align: center;
            color: #58a6ff;
            margin: 20px 0 40px;
        }
        section {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        h2 { color: #58a6ff; margin-top: 0; }
        label { color: #8b949e; display: block; margin-bottom: 6px; }
        input, select {
            background: #0d1117;
            color: #c9d1d9;
            border: 1px solid #30363d;
            padding: 10px;
            border-radius: 6px;
            width: 100%;
            max-width: 340px;
            font-size: 16px;
        }
        button {
            background: #238636;
            color: white;
            border: none;
            padding: 10px 22px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 15px;
        }
        button:hover { background: #2ea043; }
        .result {
            margin-top: 18px;
            padding: 14px;
            background: #21262d;
            border: 1px solid #30363d;
            border-radius: 6px;
            min-height: 40px;
            white-space: pre-line;
        }
        .error { color: #f85149; }
        .note { font-size: 0.85em; color: #8b949e; margin-top: 10px; }
    </style>
</head>
<body>

<h1>Freedom Mobile Agent AID</h1>

<!-- 1. Time Adder -->
<section>
    <h2>1. Egyptian Time Adder (12h)</h2>
    <div class="input-group">
        <label>Current Time (12h):</label>
        <input type="text" id="timeInput1" placeholder="e.g. 3:25 PM">
    </div>
    <div class="input-group">
        <label>Minutes to add:</label>
        <input type="number" id="minutesAdd" placeholder="e.g. 90" min="0">
    </div>
    <button onclick="addMinutes()">Calculate</button>
    <div id="result1" class="result"></div>
</section>

<!-- 2. FIXED Time Converter -->
<section>
    <h2>2. Egypt ↔ Toronto (Fixed 7h difference - Winter 2026)</h2>
    <div class="input-group">
        <label>Time (12h format):</label>
        <input type="text" id="timeInput2" placeholder="e.g. 1:00 PM">
    </div>
    <div class="input-group">
        <label>This time is in:</label>
        <select id="fromZone">
            <option value="toronto">Toronto</option>
            <option value="egypt">Egypt (Cairo)</option>
        </select>
    </div>
    <button onclick="convertTime()">Convert</button>
    <div id="result2" class="result"></div>
    <div class="note">January 2026 → Cairo is 7 hours ahead of Toronto</div>
</section>

<!-- 3. Business Days -->
<section>
    <h2>3. Ontario Business Days Calculator</h2>
    <div class="input-group">
        <label>Start Date (M/D/Y):</label>
        <input type="text" id="startDate" placeholder="e.g. 1/15/2026">
    </div>
    <button onclick="calcBusinessDays()">Calculate</button>
    <div id="result3" class="result"></div>
</section>

<!-- 4. Tax Calculator -->
<section>
    <h2>4. Canadian Sales Tax Calculator</h2>
    <div class="input-group">
        <label>Pre-tax amount (CAD):</label>
        <input type="number" id="preTax" placeholder="e.g. 100" step="0.01" min="0">
    </div>
    <div class="input-group">
        <label>Province:</label>
        <select id="province">
            <option value="AB">Alberta (5% GST)</option>
            <option value="BC">BC (12%)</option>
            <option value="MB">Manitoba (12%)</option>
            <option value="ON">Ontario (13% HST)</option>
            <option value="QC">Quebec (~14.975%)</option>
        </select>
    </div>
    <button onclick="calcTax()">Calculate</button>
    <div id="result4" class="result"></div>
</section>

<script>
// ────────────────────────────────────────────────
// Tool 1 - Time Adder (simple local)
function addMinutes() {
    const input = document.getElementById('timeInput1').value.trim().toUpperCase();
    const mins = parseInt(document.getElementById('minutesAdd').value) || 0;
    const result = document.getElementById('result1');

    const match = input.match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/);
    if (!match) {
        result.innerHTML = '<span class="error">Format: 1:00 PM or 11:45 AM</span>';
        return;
    }

    let h = parseInt(match[1]);
    const m = parseInt(match[2]);
    const period = match[3];

    if (h === 12) h = 0;
    if (period === 'PM') h += 12;

    if (h > 23 || m > 59) {
        result.innerHTML = '<span class="error">Invalid time</span>';
        return;
    }

    let totalMin = h * 60 + m + mins;
    let newH = Math.floor(totalMin / 60) % 24;
    let newM = totalMin % 60;

    const newPeriod = newH >= 12 ? 'PM' : 'AM';
    let displayH = newH % 12 || 12;

    result.textContent = `New time: ${displayH}:${newM.toString().padStart(2,'0')} ${newPeriod}`;
}

// ────────────────────────────────────────────────
// Tool 2 - FIXED converter (hardcoded 7h winter offset)
function convertTime() {
    const input = document.getElementById('timeInput2').value.trim().toUpperCase();
    const from = document.getElementById('fromZone').value;
    const result = document.getElementById('result2');

    const match = input.match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/);
    if (!match) {
        result.innerHTML = '<span class="error">Format: 1:00 PM or 11:45 AM</span>';
        return;
    }

    let h = parseInt(match[1]);
    const m = parseInt(match[2]);
    const period = match[3];

    if (h === 12) h = 0;
    if (period === 'PM') h += 12;

    if (h > 23 || m > 59) {
        result.innerHTML = '<span class="error">Invalid time</span>';
        return;
    }

    let targetH = h;
    if (from === 'toronto') {
        targetH = (h + 7) % 24;          // Toronto → Egypt
    } else {
        targetH = (h - 7 + 24) % 24;     // Egypt → Toronto
    }

    const targetPeriod = targetH >= 12 ? 'PM' : 'AM';
    let displayH = targetH % 12 || 12;

    result.textContent = `In the other place: ${displayH}:${m.toString().padStart(2,'0')} ${targetPeriod}`;
}

// ────────────────────────────────────────────────
// Tool 3 - Business days (basic version)
function calcBusinessDays() {
    const dateStr = document.getElementById('startDate').value.trim();
    const result = document.getElementById('result3');

    if (!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(dateStr)) {
        result.innerHTML = '<span class="error">Use M/D/Y format</span>';
        return;
    }

    const [month, day, year] = dateStr.split('/').map(Number);
    let date = new Date(year, month-1, day);

    const after3 = addBd(date, 3);
    const after5 = addBd(date, 5);

    result.textContent = 
        `+3 business days: ${after3.getMonth()+1}/${after3.getDate()}/${after3.getFullYear()}\n` +
        `+5 business days: ${after5.getMonth()+1}/${after5.getDate()}/${after5.getFullYear()}`;
}

function addBd(start, count) {
    let d = new Date(start);
    let added = 0;
    while (added < count) {
        d.setDate(d.getDate() + 1);
        const day = d.getDay();
        if (day !== 0 && day !== 6) added++;
    }
    return d;
}

// ────────────────────────────────────────────────
// Tool 4 - Tax (simple version)
function calcTax() {
    const amt = parseFloat(document.getElementById('preTax').value) || 0;
    const prov = document.getElementById('province').value;
    const result = document.getElementById('result4');

    if (amt <= 0) {
        result.innerHTML = '<span class="error">Enter positive amount</span>';
        return;
    }

    let taxRate = 0;
    let note = '';

    switch(prov) {
        case 'AB': taxRate = 0.05; note = 'GST 5%'; break;
        case 'BC': case 'MB': taxRate = 0.12; note = '12% total'; break;
        case 'ON': taxRate = 0.13; note = 'HST 13%'; break;
        case 'QC':
            const gst = amt * 0.05;
            const qst = (amt + gst) * 0.09975;
            const totalTax = gst + qst;
            result.textContent = 
                `GST: $${gst.toFixed(2)}\n` +
                `QST: $${qst.toFixed(2)}\n` +
                `Total tax: $${totalTax.toFixed(2)}\n` +
                `Grand total: $${(amt + totalTax).toFixed(2)}`;
            return;
    }

    const tax = amt * taxRate;
    result.textContent = 
        `${note}\n` +
        `Tax: $${tax.toFixed(2)}\n` +
        `Total: $${(amt + tax).toFixed(2)}`;
}
</script>
</body>
</html>
